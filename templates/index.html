<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buzzer</title>
</head>
<body>
    <div id="chat"></div>
    {% if user == 'Buzzer-Host' %}
    <input id="chat-input" type="hidden" value=""> <button onclick="sendMessage()" id="{{user}}" class="button">Clear Screen</button>
    {% else %}
    <input id="chat-input" type="hidden" value="{{user}}"> <button onclick="sendMessage()" id="{{user}}" class="button">Buzzer</button>
    {% endif %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
    <script>
        socket = io()
        function sendMessage () {
            const button = document.querySelector('#{{user}}')
            button.disabled = true
            socket.emit("message",document.getElementById("chat-input").value)
        }
        socket.on("new_message",(data)=>{
            if(data == ""){
                document.getElementById("chat").innerHTML="";
                const button = document.querySelector('.button')
                button.disabled = false
            }
            else{
                document.getElementById("chat").innerHTML+="<br>"+data;
            }
        })
    </script>
</body>
</html>